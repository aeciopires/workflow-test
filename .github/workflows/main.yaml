name: "Main pipeline"

on:
  push:
    branches:
      - main

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    uses: ./.github/workflows/deploy.yaml
    with:
      #environment: testing
      #region: "us-east-2"
      #environment: staging
      #region: "us-east-1"
      environment: production
      region: "sa-east-1"
    secrets:
      KUBECONFIG: ${{ secrets.KUBECONFIG }}
      GLOBAL_KUBECONFIG: ${{ secrets.GLOBAL_KUBECONFIG }}
    #env:
    #  HERONAME: ${{ env.HERONAME }}
    #  GLOBAL_HERONAME: ${{ env.GLOBAL_HERONAME }}

